<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Chess Clock</title>
    <script src="script.js" defer></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gray-900 text-white flex flex-col items-center justify-center h-screen gap-4">

    <div class="text-3xl font-bold">Chess Clock</div>

    <div class="flex flex-col gap-4 w-full max-w-md">
        <div id="player1" class="bg-gray-800 p-6 rounded text-center text-4xl cursor-pointer">
            <span id="time1">05:00</span>
        </div>
        <div id="player2" class="bg-gray-700 p-6 rounded text-center text-4xl cursor-pointer">
            <span id="time2">05:00</span>
        </div>
    </div>

    <div class="flex gap-4 mt-6">
        <button id="startPause" class="bg-blue-600 px-4 py-2 rounded hover:bg-blue-700">Start</button>
        <button id="reset" class="bg-red-600 px-4 py-2 rounded hover:bg-red-700">Reset</button>
    </div>

    <script>
        let time1 = 5 * 60;
        let time2 = 5 * 60;
        let activePlayer = null;
        let timer = null;
        let isRunning = false;

        const display1 = document.getElementById("time1");
        const display2 = document.getElementById("time2");
        const player1Div = document.getElementById("player1");
        const player2Div = document.getElementById("player2");
        const startPauseBtn = document.getElementById("startPause");
        const resetBtn = document.getElementById("reset");

        function formatTime(seconds) {
            const m = String(Math.floor(seconds / 60)).padStart(2, "0");
            const s = String(seconds % 60).padStart(2, "0");
            return `${m}:${s}`;
        }

        function updateDisplays() {
            display1.textContent = formatTime(time1);
            display2.textContent = formatTime(time2);
        }

        function switchTurn() {
            if (!isRunning) return;
            activePlayer = activePlayer === "player1" ? "player2" : "player1";
        }

        function tick() {
            if (activePlayer === "player1") {
                if (time1 > 0) time1--;
            } else if (activePlayer === "player2") {
                if (time2 > 0) time2--;
            }
            updateDisplays();
            if (time1 === 0 || time2 === 0) {
                clearInterval(timer);
                isRunning = false;
                startPauseBtn.textContent = "Start";
                alert(`${time1 === 0 ? "Player 1" : "Player 2"} ran out of time!`);
            }
        }

        player1Div.addEventListener("click", () => {
            if (activePlayer === "player1") {
                switchTurn();
            }
        });

        player2Div.addEventListener("click", () => {
            if (activePlayer === "player2") {
                switchTurn();
            }
        });

        startPauseBtn.addEventListener("click", () => {
            if (!isRunning) {
                isRunning = true;
                activePlayer = activePlayer || "player1";
                timer = setInterval(tick, 1000);
                startPauseBtn.textContent = "Pause";
            } else {
                isRunning = false;
                clearInterval(timer);
                startPauseBtn.textContent = "Start";
            }
        });

        resetBtn.addEventListener("click", () => {
            clearInterval(timer);
            time1 = time2 = 5 * 60;
            activePlayer = null;
            isRunning = false;
            updateDisplays();
            startPauseBtn.textContent = "Start";
        });

        updateDisplays();

    </script>
</body>

</html>
